var cpuDataSets=[],windowGap=0;function get_cpu_use(){$.ajax({url:"cpu.api",type:"post",data:{counter:"0"}}).done(function(e){$("#cpuinfo").text(e[0]+"% ("+(e.length-1)+" CPU)");var t=0;if(0==cpuDataSets.length){t=1;for(var i=e.length-1;i>=0;i--)cpuDataSets.push(new TimeSeries),i>0&&($("#cpu0").after('<canvas id="cpu'+i+'" height="100" />'),document.getElementById("cpu"+i).width=window.innerWidth-windowGap)}for(i=0;i<e.length;i++)cpuDataSets[i].append((new Date).getTime(),e[i]),1==t&&initChart(i);1==t&&$(window).resize(function(){for(var t=0;t<e.length;t++)document.getElementById("cpu"+t).width=window.innerWidth-windowGap})})}function initChart(e){var t;t=0==e?{strokeStyle:"rgba(255, 0, 0, 1)",fillStyle:"rgba(255, 0, 0, 0.2)",lineWidth:3}:{strokeStyle:"rgba(0, 0, 255, 1)",fillStyle:"rgba(0, 0, 255, 0.2)",lineWidth:2};var i=new SmoothieChart({labels:{disabled:!0},maxValue:103,minValue:-3,millisPerPixel:80,grid:{strokeStyle:"#555555",lineWidth:1,millisPerLine:1e3,verticalSections:4}});i.addTimeSeries(cpuDataSets[e],t),i.streamTo($("#cpu"+e)[0],1e3)}$(function(){$("#status").text(""),document.getElementById("cpu0").width=window.innerWidth-windowGap,get_cpu_use(),setInterval(get_cpu_use,1e3);new SmoothieChart({millisPerPixel:80,grid:{strokeStyle:"#555555",verticalSections:4}});document.addEventListener("visibilitychange",function(){window.dispatchEvent(new Event("resize"))})});